<!DOCTYPE html>
<html style="height: 100%; margin:0;">

<head>
    <title>weather station</title>    
    <link rel="stylesheet" type="text/css" href="weather.css" />
    <script src="jquery.min.js"></script>
    <script type="text/javascript" src="connection.js"></script>

</head>
<body style="height: 100%; margin:0;">

<div class="container">
  <div class="item" id="temp">hi</div>
  <div class="item" id="humi">there</div>
  <div class="item" id="vwin">aaa</div>
</div>




<script type="text/javascript">





$( function () {
  
   setTimeout( init2, 0 );

});


let init2 = () => {

  const ip = "192.168.188.57:8266";
  const pw = "4025";


  gConnection = createWebreplConnection( ip, pw );


  gConnection.onlogin = () => {

  	console.log("connected to ", ip )
  }

  update();

}

let receive = (out, err ) => {
	console.log("got", out,   "     err=",err);

	const v = out.split(" ")
	const temp = v[0];
	const humi = v[1];
	const vwin = v[2];

	$("#temp").html( '<p style="font-size:20px" > temperatuur </p><br><p>' + temp +"&#176<sup><small>C</sup></small></p>" );
	$("#humi").html( '<p style="font-size:20px" > luchtvochtigheid </p><br><p>' + humi +"<sup><small>%</sup></small> </p>");
	$("#vwin").html(  '<p style="font-size:20px" > windsnelheid </p><br><p>' + vwin +"<sup><small>mV</sup></small> </p>");

}


let update = () => {
	const cmd = "weather.get()";
	gConnection.run( cmd, receive );
	setTimeout( update, 10000 );
}




</script>




</body>
</html>